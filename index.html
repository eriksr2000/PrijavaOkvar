<!DOCTYPE html>
<html lang="sl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Prijava okvar strojev</title>

<link rel="stylesheet" href="style.css?v=6">

<script src="bazaStrojev.js"></script>
<script src="bazaStrojnikov.js"></script>

</head>
<body>

<h1>ğŸš§ PRIJAVA OKVARE STROJA</h1>

<form id="reportForm" action="https://formsubmit.co/elvis.ramic@ggd.si" method="POST" enctype="multipart/form-data">

  <input type="hidden" name="_cc" value="servis@ggd.si,denis.mulalic@ggd.si">
  <input type="hidden" name="_captcha" value="false">
  <input type="hidden" name="_template" value="table">
  <input type="hidden" name="_subject" id="emailSubject" value="Nova prijava okvare">

  <div class="section">
    <label>Stroj</label>
    <div class="row-flex">
      <select id="stroj" name="Stroj" required onchange="checkSelection()">
        <option value="" disabled selected>Izberi stroj...</option>
      </select>
      <button type="button" id="delStrojBtn" class="delete-btn" onclick="brisiIzbranStroj()">ğŸ—‘ï¸</button>
    </div>

    <label>Strojnik</label>
    <div class="row-flex">
      <select id="strojnik" name="Strojnik" required onchange="checkSelection()">
        <option value="" disabled selected>Izberi strojnika...</option>
      </select>
      <button type="button" id="delStrojnikBtn" class="delete-btn" onclick="brisiIzbranStrojnik()">ğŸ—‘ï¸</button>
    </div>
  </div>

  <div class="section">
    <label>Vrsta okvare</label>
    <div class="radio-row">
      <label class="radio-btn"><input type="radio" name="Vrsta_okvare" value="Mehanska" required><span>MEHANSKA</span></label>
      <label class="radio-btn"><input type="radio" name="Vrsta_okvare" value="HidravliÄna"><span>HIDRAVLIÄŒNA</span></label>
      <label class="radio-btn"><input type="radio" name="Vrsta_okvare" value="ElektriÄna"><span>ELEKTRIÄŒNA</span></label>
      <label class="radio-btn"><input type="radio" name="Vrsta_okvare" value="Drugo"><span>DRUGO</span></label>
    </div>

    <label>Vpliv okvare na delovanja stroja</label>
    <div class="radio-row">
      <label class="radio-btn">
        <input type="radio" name="Vpliv_delovanja" value="Vpliva na delovanje" required>
        <span>OKVARA <span style="color: #d9534f; font-weight: 800;">VPLIVA</span> NA DELOVANJE</span>
      </label>
      <label class="radio-btn">
        <input type="radio" name="Vpliv_delovanja" value="Ne vpliva na delovanje">
        <span>OKVARA <span style="color: #28a745; font-weight: 800;">NE VPLIVA</span> NA DELOVANJE</span>
      </label>
    </div>

    <label>Opis okvare</label>
    <textarea id="opis" name="Opis_okvare" rows="3" placeholder="Kratko opiÅ¡i teÅ¾avo..." required></textarea>

    <label>ğŸ“· Fotografija (samo ena)</label>
    <input type="file" id="fileInput" name="attachment" accept="image/*">
    
    <div id="filePreview" class="file-preview">
        <span id="fileName" class="file-name"></span>
        <button type="button" class="remove-btn" onclick="removeImage()">âŒ Odstrani</button>
    </div>
  </div>

  <button type="submit" id="submitBtn" class="submit-btn">POÅ LJI PRIJAVO</button>
  
</form>

<div id="adminPanel" class="admin-panel">
  <div class="admin-header">ğŸ›¡ï¸ Administrator</div>
  
  <label>Dodaj nov stroj:</label>
  <input type="text" id="novStrojInv" placeholder="Inventarna Å¡t. (npr. 1234)" style="margin-bottom:5px">
  <input type="text" id="novStrojTip" placeholder="Opis (npr. Bager CAT)" style="margin-bottom:5px">
  <button type="button" class="admin-btn" onclick="dodajStroj()">â• Dodaj stroj</button>

  <hr style="margin: 15px 0; border-top: 1px solid #90caf9;">

  <label>Dodaj novega strojnika:</label>
  <input type="text" id="novStrojnikIme" placeholder="Ime in Priimek (VELIKE ÄŒRKE)">
  <button type="button" class="admin-btn" onclick="dodajStrojnika()">â• Dodaj strojnika</button>

  <hr style="margin: 15px 0; border-top: 1px solid #90caf9;">
  
  <button type="button" class="admin-btn" style="background:#4caf50" onclick="izvoziPodatke()">ğŸ“¥ Izvozi bazo za GitHub</button>
  <textarea id="exportArea" class="export-area" readonly></textarea>
  <div style="font-size:11px; color:#666; margin-top:5px;">
    *Spremembe so shranjene samo na tem telefonu. Za vse ostale posodobite datoteki na GitHubu s kodo zgoraj.
  </div>
  
  <button type="button" class="admin-btn" style="background:#607d8b; margin-top:15px" onclick="adminLogout()">Odjava</button>
</div>

<div class="footer">
  &copy; 2026 Elvis RamiÄ‡ | Vse pravice pridrÅ¾ane. Aplikacija za interno uporabo! <br>
  <span style="cursor:pointer; text-decoration:underline" onclick="adminLogin()">Admin prijava</span>
</div>

<script src="main.js"></script>

</body>
</html>
